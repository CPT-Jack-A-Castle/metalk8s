---
cluster: kubernetes

kubeadm_preflight:
  mandatory:
    packages:
      - util-linux            # provides nsenter, mount
      - iproute               # provides ip
      - iptables              # provides iptables
    ports:
      - 10250
      - 10251
      - 10252
      - 2379
      - 2380
    sysctl_values:
      net.bridge.bridge-nf-call-ip6tables: 1
      net.bridge.bridge-nf-call-iptables: 1
      net.ipv4.ip_forward: 1
  recommended:
    packages:
      - ebtables              # provides ebtables
      - ethtool               # provides ethtool
      - socat                 # provides socat
      - iproute               # provides tc
      - coreutils             # provides touch

repo:
  online_mode: true
  local_mode: false
  base_path: /srv/scality/metalk8s-2.0/packages
  host: 127.0.0.1
  port: 8080
  repositories:
    metalk8s-base:
      humanname: CentOS - Base
      gpgcheck: 1
      gpgkeys:
        - RPM-GPG-KEY-metalk8s-base-7_1
      repo_gpg_check: 0
      enabled: 0

    metalk8s-epel:
      humanname: EPEL
      gpgcheck: 1
      gpgkeys:
        - RPM-GPG-KEY-metalk8s-epel-7_1
      repo_gpg_check: 0
      enabled: 0

    metalk8s-external:
      humanname: Scality - External resources
      gpgcheck: 0
      gpgkeys: []
      repo_gpg_check: 0
      enabled: 0

    metalk8s-extras:
      humanname: CentOS - Extras
      gpgcheck: 1
      gpgkeys:
        - RPM-GPG-KEY-metalk8s-extras-7_1
      repo_gpg_check: 0
      enabled: 0

    metalk8s-kubernetes:
      humanname: Kubernetes
      gpgcheck: 1
      gpgkeys:
        - RPM-GPG-KEY-metalk8s-kubernetes-7_1
        - RPM-GPG-KEY-metalk8s-kubernetes-7_2
      repo_gpg_check: 0
      enabled: 0

    metalk8s-saltstack:
      humanname: SaltStack
      gpgcheck: 1
      gpgkeys:
        - RPM-GPG-KEY-metalk8s-saltstack-7_1
      repo_gpg_check: 0
      enabled: 0

    metalk8s-scality:
      humanname: Scality
      gpgcheck: 0
      gpgkeys: []
      repo_gpg_check: 0
      enabled: 0

    metalk8s-updates:
      humanname: CentOS - Updates
      gpgcheck: 1
      gpgkeys:
        - RPM-GPG-KEY-metalk8s-updates-7_1
      repo_gpg_check: 0
      enabled: 0

  packages:
    calico-cni-plugin:
      version: latest
      repository: metalk8s-scality
    container-selinux:
      version: latest
      repository: metalk8s-external
    containerd:
      version: latest
      repository: metalk8s-epel
    cri-tools:
      version: latest
      repository: metalk8s-kubernetes
    kubelet:
      version: 1.11.7-0
      repository: metalk8s-kubernetes
    python34-adal:
      version: latest
      repository: metalk8s-scality
    python34-certifi:
      version: latest
      repository: metalk8s-epel
    python34-dateutil:
      version: latest
      repository: metalk8s-epel
    python34-google-auth:
      version: latest
      repository: metalk8s-scality
    python34-jwt:
      version: latest
      repository: metalk8s-epel
    python34-m2crypto:
      version: latest
      repository: metalk8s-saltstack
    python34-oauthlib:
      version: latest
      repository: metalk8s-scality
    python34-PyYAML:
      version: latest
      repository: metalk8s-epel
    python34-requests:
      version: latest
      repository: metalk8s-epel
    python34-requests-oauthlib:
      version: latest
      repository: metalk8s-scality
    python34-six:
      version: latest
      repository: metalk8s-epel
    python34-urllib3:
      version: latest
      repository: metalk8s-epel
    python34-websocket-client:
      version: latest
      repository: metalk8s-epel
    python34-kubernetes:
      version: latest
      repository: metalk8s-scality
    runc:
      version: latest
      repository: metalk8s-extras
    salt-minion:
      version: 2019.2.0-1.el7
      repository: metalk8s-saltstack
    skopeo:
      version: latest
      repository: metalk8s-extras

networks: {}

kubelet:
  container_engine: "containerd"
  service:
    options:
      container-runtime: remote
      container-runtime-endpoint: "unix:///run/containerd/containerd.sock"

ca:
  cert:
    days_valid: 3650
  signing_policy:
    days_valid: 365

kube_api:
  cert:
    server_signing_policy: kube_apiserver_server_policy
    client_signing_policy: kube_apiserver_client_policy
  service_ip: "10.96.0.1"

etcd:
  ca:
    cert:
      days_valid: 3650
    signing_policy:
      days_valid: 365
  cert:
    apiserver_client_signing_policy: etcd_client_policy
    healthcheck_client_signing_policy: etcd_client_policy
    peer_signing_policy: etcd_server_client_policy
    server_signing_policy: etcd_server_client_policy

front_proxy:
  ca:
    cert:
      days_valid: 3650
    signing_policy:
      days_valid: 365
  cert:
    client_signing_policy: front_proxy_client_policy

coredns:
  cluster_dns_ip: 10.96.0.10
  cluster_domain: cluster.local
  reverse_cidrs: in-addr.arpa ip6.arpa

upgrade: False        # define if we're on an upgrade case
